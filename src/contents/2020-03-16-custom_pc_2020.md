---
layout: post
title: 久々に自作PCを組んだ話
categories:
- My PC environment
---

Dell XPS 13 2-in-1 7390を昨年の10月に買ってから、メモリ32GBな環境にすっかり慣れてしまいました。さらに、Archlinuxにもすっかり慣れてしまって、WindowsやMacにもはや戻れない体になりました。特に、ControlキーとCommandキーを使い分けないといけないMacOSに関しては、もう脳みそがついていけません。

メモリ32GBなノートPCはなかなかなく、Macでそれを求めると16インチのMacbook Proの結構値段がするモデルになっちゃう。そして、自宅勤務なために、そもそもノートPCを仕事部屋で使っててもその利点はない。

よし、久々に自作PC作るかー、と思いたったのが年明けくらいのとき。それから今まで、ATXやMicroATXで組むか、それともIntel NUCといったベアボーンにするか、悩みに悩み、結果、ATXにしました。ちょっと長めに使いたいので、将来的な拡張性の方を重視した選択です。

今回の前提条件としては、以下でした。

* CPUは、Core i5相当で、あわよくばCore i7。ただ、AMDのRyzenシリーズもめっちゃ気になってて、ゲームを一切しないので、Ryzen5 3600とかRyzen7 3700xとかでもいいかも。
* マザーボードは、できればMicroATXで小さめのケースに収まるものが良い。最大メモリ量が最低でも64GBで、もし手が届けば128GBまで積めると嬉しい。
* 今回買うメモリは、32GBで良いかな。
* ストレージは、本当はM.2にしたいけど、普通の2.5インチのSSDで十分かも。容量は1TB。
* (これが最重要) ディスプレイを最低3枚接続可能。そのうち1枚は4K。

以前組んだときに購入したPC DEPO鴻巣店に電話して、上記を伝えてみたところ、やはり15,16万円はいくだろうと。Intel NUCだと9万円くらいで収まるんだけど、最後の条件「ディスプレイ枚数」がおそらく2枚になっちゃう。ここがずっと引っかかってて、決断ができませんでした。

で、PC DEPOに実際に土曜日に行ってきて、店員さんといろいろ相談しながら、最終的に落ち着いた構成が、以下でした。

* CPU: AMD Ryzen7 3700x
* Memory: 32GB
* Storage: SAMSUNG SSD 1TB
* Motherboard: Asrok X570 Phantom Gaming 4
* Graphic board: MSI GeForce RTX 2060 AERO ITX 6G OC
* Case: SIRIUS (ATXミドルタワー)
* Power: 750W
* WiFi: ELECOM WDC-867DU3S
* Web camera: logicool C920s

事前に「Ryzen7 3700xならマザーボードはX570じゃないと実力を発揮しない」といった記事をいくつか目にしていて、Ryzen5で十分かな、と思いながら見せに行くも、Ryzen7 + X570 のセットで割引されているベースモデルを見て、まずこれで見積もってもらおう、と依頼しました。電話した段階ですでに僕の希望を満たすであろう構成を選んでくれていて、それはCore i5だったんだけど、それをRyzen7にしてもらって見積もりし直してもらい、上記に落ち着きました。大きなタワーは・・・うーん・・・と思ってたけど、X570 にするにはミドルタワーの選択肢が好ましく、さらにMicroATAにすると、今度はグラボが刺さるかどうかが怪しくなると。一応MicroATAでのざっくり構成も検討したものの、値段的にもそんなに安くなるわけではないし、将来性も犠牲になる（メモリが最大64GBになっちゃう、とか）ので、思い切って決断しました。

日曜日に頑張って組んで、これを書いているのは月曜日の夕方ですが、すでに仕事を開始しています。結果としては、大満足です。しかし、最近はこんなにも「ヒカヒカ」なんですね。これでも大人しめのものを選んだつもりだったのですが・・・。

![]({{ "/images/2020/03/custom-pc-01.webp" | prepend: site.baseurl }})

そういえば、BIOS（UFEI）の「ブート時にビープ音を鳴らす」を有効にしてみたところ、次のブート時にBIOS画面を出そうとしても出なくなった、という現象が発生しました。OS入れる前に最初にやったことだったので、「え、おれ、もう壊した？」って焦りましたが、CMOSクリアをしたところ、復活しました。怖い怖い。

OSは、Manjaro Linuxを入れました。Gnome版です。ArchやUbuntuと迷ったのですが（Ubuntu 19.10は最初に入れてみた）、

* Archに慣れているが、日々のアップデートで環境が壊れることは避けたい（先週にGnomeのアップデート時に壊れかけた経験から）。
* Ubuntuでもいいけど、それよりは最新に近い状況に頻度高く更新していきたい。

というわけで、Manjaroにした次第です。

将来、再度セットアップする際の自分へのメモとして、今まで経験したことがなかった手順を控えておきます。ちなみに、下記以外のものは、特に何もしなくても使い始めることができました。ロジクールのウェブカメラも、USBに刺しただけで使えました。

# NVIDIAグラボのドライバセットアップ

これは簡単でした。以下のコマンドを打ってから再起動して完了です。 `0300` はグラフィックカードのIDを意味しています。

`sudo mhwd -a pci nonfree 0300`

[How to install the NVIDIA drivers on Manjaro 18 Linux - LinuxConfig.org](https://linuxconfig.org/how-to-install-the-nvidia-drivers-on-manjaro-18-linux)

# WiFi子機の認識

何も考えずにElecom製のWiFi子機を買ってしまいましたが、これも数ステップで認識させることができました。

* 先にKernel Headerを入れておく（今回は linux54-headers だった）。
* rtl8822bu-dkms-git パッケージをインストールする。
* 再起動する。

[AUR (en) - rtl8822bu-dkms-git](https://aur.archlinux.org/packages/rtl8822bu-dkms-git/?O=50&PP=10)

これで、WiFi子機を使うためのドライバが有効になって、WiFiの設定ができるようになります。
