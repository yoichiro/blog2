---
layout: post
title: Kubuntu 20.04を20.10にアップグレードした話
categories:
- My PC environment
---

今年の3月からずっと使い続けてきたKubuntu 20.04。すこぶる快調かと思いきや、最近どうも挙動が怪しい場面に出くわしていました。Chrome、Slack、Discord、IntelliJ IDEAなど、いろいろなアプリケーションが突然クラッシュしていなくなる現象が毎日起きるようにになりました。原因はわかっていないのですが、ログを見てみると、SEGVが起きているようです。。。

Kubuntuはすでに20.10がリリースされています。これにアップグレードしたとしてもきっと安定性はあまり変わらないかなとは思いますが、やらないよりはやった方が良いかな、と思って、今日思い切ってアップグレードをしてみました。

アップグレードの手順は、基本的にUbuntuと変わらないはずなのですが、Kubuntuコミュニティからアップグレードの手順が公開されているのを見つけました。

[GroovyUpgrades/Kubuntu - Community Help Wiki](https://help.ubuntu.com/community/GroovyUpgrades/Kubuntu)

Kubuntuにはさほど手を入れてなくて、標準構成のままアプリケーションを入れて使っているだけです。ひとつだけ、ElecomのWiFiドングルがきっとアップデートしたら使えなくなるかな、というのは気になりますが、きっと新しいドライバを入れれば大丈夫だろう、と思って、上記手順を素直に行っていきました。

アップグレード時のコマンドにGUIを表示するように指定したので、進捗状況や各種問い合わせが親切にGUIにて表示されます。

「ここから先は後に戻れませんよ」という警告メッセージが出て、アップグレードの覚悟はできていたので、そのまま進みました。あとは、アップグレードが無事完了するのを待つのみ、と思っていたのですが、ここであることに気が付きます。


![]({{ "/images/2020/12/kubuntu-upgrade-1.webp" | prepend: site.baseurl }})


この画面、何か違和感を感じませんか？

そう、表示されているメッセージをよく見てください。

「Ubuntu 20.04 LTSをバージョン20.04にアップグレードしています」

は？20.04 LTSから、20.04にアップグレード？？？

ダウングレードしてんじゃねーか！！！！！！！

アップグレードに失敗するかもしれない、という覚悟はしましたが、まさか「ダウングレードされるかもしれない」という心配はしていなかったので、えええええ、となりました。

再起動までの10分間は、とても長かったです。変な気持ちで待っていました。

・・・

いろいろ作業が終わり、再起動後に無事Kubuntuは起動し、カーネルのバージョンは5.4.0から5.8.0に上がっていました。どうやら、ダウングレードはされずに、無事アップグレードされたようです。


![]({{ "/images/2020/12/kubuntu-upgrade-2.webp" | prepend: site.baseurl }})


KDEも、5.19に上がっていましたし、Kubuntu 20.10 という表記を見ることができました。


![]({{ "/images/2020/12/kubuntu-upgrade-3.webp" | prepend: site.baseurl }})


めでたし、めでたし。

きっと、アップグレードのGUIのローカライズ時に混入した不具合かな、と思います。

もしKubuntu 20.04を20.10にアップグレードしようと思っている方は、びっくりせずに安心してアップグレードしてください。

ちなみに、僕が使っているElecomのWiFiドングルには、RTL8822BU のチップが入っていて、以下をビルドしてインストールしたら、無事WiFiも復活しました。

[morrownr/88x2bu: Linux driver for the Realtek RTL8812BU and RTL8822BU Chipsets](https://github.com/morrownr/88x2bu)

まあ、これを入れるためにはインターネットが必要、という鶏玉子問題があるのですが（僕は有線LANで一旦繋いで対処しました）。
